# Reference

<!-- DO NOT EDIT: This document was generated by Puppet Strings -->

## Table of Contents

### Classes

#### Public Classes

* [`earlyoom`](#earlyoom): Installs earlyoom and configures earlyoom

#### Private Classes

* `earlyoom::config`: Configures earlyoom
* `earlyoom::install`: Installs earlyoom
* `earlyoom::service`: Control earlyoom service

## Classes

### <a name="earlyoom"></a>`earlyoom`

Installs earlyoom and configures earlyoom

* **See also**
  * https://github.com/rfjakob/earlyoom
    * earlyoom homepage

#### Examples

##### Simple Example

```puppet
class{'earlyoom':}
```

##### Full Example

```puppet
class{'earlyoom':
  interval        => 120,
  ignore_positive => true,
  notify_send     => true,
  debug           => true,
  priority        => true,
  prefer          => '(^|/)(init|X|sshd|firefox)$',
  avoid           => '(^|/)(cupsd|xrootd)$',
  notify_command  => '/bin/echo ${UID}',
  memory_percent  => 20,
  swap_percent    => [10,4]
  memory_size     => 20000,
  swap_size       => [30000,60000],
  dryrun          => false,
}
```

#### Parameters

The following parameters are available in the `earlyoom` class:

* [`pkgname`](#-earlyoom--pkgname)
* [`interval`](#-earlyoom--interval)
* [`configfile`](#-earlyoom--configfile)
* [`service_enable`](#-earlyoom--service_enable)
* [`ignore_positive`](#-earlyoom--ignore_positive)
* [`notify_send`](#-earlyoom--notify_send)
* [`debug`](#-earlyoom--debug)
* [`notify_command`](#-earlyoom--notify_command)
* [`priority`](#-earlyoom--priority)
* [`avoid`](#-earlyoom--avoid)
* [`prefer`](#-earlyoom--prefer)
* [`memory_percent`](#-earlyoom--memory_percent)
* [`swap_percent`](#-earlyoom--swap_percent)
* [`memory_size`](#-earlyoom--memory_size)
* [`swap_size`](#-earlyoom--swap_size)
* [`dryrun`](#-earlyoom--dryrun)
* [`local_user`](#-earlyoom--local_user)

##### <a name="-earlyoom--pkgname"></a>`pkgname`

Data type: `String[1]`

Name of package to install

Default value: `'earlyoom'`

##### <a name="-earlyoom--interval"></a>`interval`

Data type: `Integer[0]`

Memory report interval in seconds

Default value: `60`

##### <a name="-earlyoom--configfile"></a>`configfile`

Data type: `Stdlib::Unixpath`

Full filename of configuration file

Default value: `'/etc/default/earlyoom'`

##### <a name="-earlyoom--service_enable"></a>`service_enable`

Data type: `Boolean`

Should the earlyoom service be started.

Default value: `true`

##### <a name="-earlyoom--ignore_positive"></a>`ignore_positive`

Data type: `Boolean`

If true user-space oom killer should ignore positive oom_score_adj values (-i)

Default value: `false`

##### <a name="-earlyoom--notify_send"></a>`notify_send`

Data type: `Boolean`

If true enable notifications using "notify-send" (-n)

Default value: `false`

##### <a name="-earlyoom--debug"></a>`debug`

Data type: `Boolean`

If true enable debug messages (-d)

Default value: `false`

##### <a name="-earlyoom--notify_command"></a>`notify_command`

Data type: `Optional[String[1]]`

Specify a command to enable notifications with. (-N cmd)

Default value: `undef`

##### <a name="-earlyoom--priority"></a>`priority`

Data type: `Boolean`

If true set niceness of earlyoom to -20 and oom_score_adj to -1000 (-p)

Default value: `false`

##### <a name="-earlyoom--avoid"></a>`avoid`

Data type: `Optional[String[1]]`

avoid killing processes matching REGEX (--avoid REGEX)

Default value: `undef`

##### <a name="-earlyoom--prefer"></a>`prefer`

Data type: `Optional[String[1]]`

avoid killing processes matching REGEX (--prefer REGEX)

Default value: `undef`

##### <a name="-earlyoom--memory_percent"></a>`memory_percent`

Data type: `Optional[Variant[Integer[0,100],Array[Integer[0,100],2,2]]]`

set available memory minimum to PERCENT of total
earlyoom sends SIGTERM once below PERCENT, then
SIGKILL once below KILL_PERCENT (default PERCENT/2).
(-m int or -m int,int

Default value: `undef`

##### <a name="-earlyoom--swap_percent"></a>`swap_percent`

Data type: `Optional[Variant[Integer[0,100],Array[Integer[0,100],2,2]]]`

set available swap minimum to PERCENT of total
earlyoom sends SIGTERM once below PERCENT, then
SIGKILL once below KILL_PERCENT (default PERCENT/2).
(-s int or -s int,int

Default value: `undef`

##### <a name="-earlyoom--memory_size"></a>`memory_size`

Data type: `Optional[Variant[Integer[0],Array[Integer[0],2,2]]]`

set available memory minimum to SIZE Kib
earlyoom sends SIGTERM once below PERCENT, then
SIGKILL once below KILL_PERCENT (default PERCENT/2).
(-M int or -M int,int

Default value: `undef`

##### <a name="-earlyoom--swap_size"></a>`swap_size`

Data type: `Optional[Variant[Integer[0],Array[Integer[0],2,2]]]`

set available memory minimum to SIZE Kib
earlyoom sends SIGTERM once below PERCENT, then
SIGKILL once below KILL_PERCENT (default PERCENT/2).
(-S int or -S int,int

Default value: `undef`

##### <a name="-earlyoom--dryrun"></a>`dryrun`

Data type: `Boolean`

if true dry run (do not kill any processes) (--dryrun)

Default value: `false`

##### <a name="-earlyoom--local_user"></a>`local_user`

Data type: `Boolean`

On the RedHat family of OSes the earlyoom service uses a systemd dynamic user in
its service unit. Setting this to true will create a local system account "earlyoom"
to run earlyoom as instead.
On the Debian family earlyoom runs as root and this parameter is ignored.
Note to transition from `false` to `true` it may be necessary to stop earlyoom
so the dynamic user is not present and the local user can be added.

Default value: `false`

